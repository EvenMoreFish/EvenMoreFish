"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[369],{612:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"migration/database-migration","title":"Database Migration","description":"EMF uses flyway to automatically migrate the database. Normally you shouldn\'t need to manually migrate the database.","source":"@site/docs/migration/database-migration.md","sourceDirName":"migration","slug":"/migration/database-migration","permalink":"/docs/migration/database-migration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Database Migration"},"sidebar":"tutorialSidebar","previous":{"title":"Migrate from 1.7.3 (Troubleshooting)","permalink":"/docs/migration/migrate-from-1.x"},"next":{"title":"Developers","permalink":"/docs/category/developers"}}');var i=a(4848),d=a(8453);const s={title:"Database Migration"},r="Database Migration",o={},l=[{value:"Migrating from Database V2",id:"migrating-from-database-v2",level:2}];function c(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.mdxAdmonitionTitle,{children:["Permission: ",(0,i.jsx)(t.code,{children:"emf.admin.debug.database"})]})}),"\n",(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"database-migration",children:"Database Migration"})}),"\n",(0,i.jsx)(t.p,{children:"EMF uses flyway to automatically migrate the database. Normally you shouldn't need to manually migrate the database.\r\nIn case things breaks you can use some commands to try and fix the issues."}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.mdxAdmonitionTitle,{children:["Permission ",(0,i.jsx)(t.code,{children:"emf.admin.debug.database.flyway"})]})}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Command"}),(0,i.jsx)(t.th,{children:"Description"}),(0,i.jsx)(t.th,{children:"Permission"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"/emf admin database drop-flyway"})}),(0,i.jsx)(t.td,{children:"Drops the Flyway schema history table"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"emf.admin.debug.database.flyway"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"/emf admin database repair-flyway"})}),(0,i.jsx)(t.td,{children:"Runs the Flyway repair command"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"emf.admin.debug.database.flyway"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"/emf admin database clean-flyway"})}),(0,i.jsx)(t.td,{children:"Runs the Flyway clean command"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"emf.admin.debug.database.flyway"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"/emf admin database migrate-to-latest"})}),(0,i.jsx)(t.td,{children:"Attempts to migrate the database to the latest version"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"emf.admin.debug.database.migrate"})})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"migrating-from-database-v2",children:"Migrating from Database V2"}),"\n",(0,i.jsx)(t.admonition,{title:"Not sure what database version you have?",type:"tip",children:(0,i.jsxs)(t.p,{children:["Try running ",(0,i.jsx)(t.code,{children:"/emf admin version"})]})}),"\n",(0,i.jsxs)(t.p,{children:["Running the ",(0,i.jsx)(t.code,{children:"/emf admin migrate"})," will attempt to migrate from database version 2 to the latest version."]})]})}function m(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>r});var n=a(6540);const i={},d=n.createContext(i);function s(e){const t=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(d.Provider,{value:t},e.children)}}}]);